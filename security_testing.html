<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Testing - Los Pollos Hermanos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFEB3B;
            color: #D50000;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }
        .nav-links {
            text-align: center;
            margin-bottom: 20px;
        }
        .nav-link {
            color: #D50000;
            font-size: 18px;
            text-decoration: none;
            margin: 0 10px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #FFB300;
            border-radius: 5px;
        }
        .xss-section {
            border-color: #28a745;
            background-color: #f8fff8;
        }
        .sql-section {
            border-color: #dc3545;
            background-color: #fff5f5;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .sql-button {
            background-color: #dc3545;
        }
        .output {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            min-height: 30px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-links">
            <a href="polloshermanoswebsite.html" class="nav-link">‚Üê Back to Home</a>
        </div>

        <h1>üîí Security Testing Lab</h1>
        <h2>Los Pollos Hermanos - Educational Testing</h2>
        
        <div class="warning">
            <strong>‚ö†Ô∏è WARNING:</strong> This page demonstrates security vulnerabilities for educational purposes only. 
            Never use these techniques on systems you don't own!
        </div>

        <!-- XSS Testing Section -->
        <div class="test-section xss-section">
            <h3>üü¢ XSS (Cross-Site Scripting) Testing</h3>
            <p>Test XSS vulnerabilities in form fields:</p>
            
            <label>Customer Name (vulnerable field):</label>
            <input type="text" id="nameInput" placeholder="Try: <script>alert('XSS')</script>">
            <button onclick="testNameField()">Submit Name</button>
            <div class="output" id="nameOutput"></div>
            
            <label>Search Menu (vulnerable field):</label>
            <input type="text" id="searchInput" placeholder="Try: <img src=x onerror=alert('XSS')>">
            <button onclick="testSearchField()">Search</button>
            <div class="output" id="searchOutput"></div>
            
            <label>URL Parameter XSS:</label>
            <p>Current URL parameter 'test': <span id="urlParam"></span></p>
            <p>Try adding: <code>?test=&lt;script&gt;alert('XSS')&lt;/script&gt;</code> to the URL</p>
        </div>

        <!-- SQL Injection Simulation -->
        <div class="test-section sql-section">
            <h3>üî¥ SQL Injection Testing (Simulated)</h3>
            <p>These simulate SQL injection without a real database:</p>
            
            <label>Login Username:</label>
            <input type="text" id="sqlUser" placeholder="Try: admin'-- or ' OR '1'='1'--">
            <button class="sql-button" onclick="testSQLLogin()">Test Login</button>
            <div class="output" id="sqlOutput"></div>
            
            <label>Order ID Lookup:</label>
            <input type="text" id="orderID" placeholder="Try: 1' UNION SELECT username,password FROM users--">
            <button class="sql-button" onclick="testOrderLookup()">Lookup Order</button>
            <div class="output" id="orderLookupOutput"></div>
        </div>

        <!-- Test Your Own Forms -->
        <div class="test-section">
            <h3>üîß Test Your Forms</h3>
            <p>Try these payloads in your actual checkout form:</p>
            
            <div style="background: #f0f8ff; padding: 10px; border-radius: 4px; margin: 10px 0;">
                <strong>XSS Payloads to test in your checkout form:</strong><br>
                <code>&lt;script&gt;alert('XSS in name')&lt;/script&gt;</code><br>
                <code>&lt;img src=x onerror=alert('XSS')&gt;</code><br>
                <code>&lt;svg onload=alert('XSS')&gt;&lt;/svg&gt;</code>
            </div>
            
            <div style="background: #fff5f5; padding: 10px; border-radius: 4px; margin: 10px 0;">
                <strong>SQL Injection Payloads (for URL parameters):</strong><br>
                <code>' OR '1'='1'--</code><br>
                <code>' UNION SELECT NULL,NULL,NULL--</code><br>
                <code>1; DROP TABLE users--</code> (Don't actually use this!)
            </div>
            
            <button onclick="openYourForms()">Open Your Forms in New Tabs</button>
        </div>
    </div>

    <script>
        // XSS Testing Functions
        function testNameField() {
            const input = document.getElementById('nameInput').value;
            // VULNERABLE: Direct insertion without sanitization
            document.getElementById('nameOutput').innerHTML = 'Name processed: ' + input;
        }

        function testSearchField() {
            const input = document.getElementById('searchInput').value;
            // VULNERABLE: Direct insertion without sanitization
            document.getElementById('searchOutput').innerHTML = 'Search results for: ' + input + '<br>No items found.';
        }

        function checkURLParam() {
            const urlParams = new URLSearchParams(window.location.search);
            const testParam = urlParams.get('test');
            if (testParam) {
                // VULNERABLE: Direct insertion of URL parameter
                document.getElementById('urlParam').innerHTML = testParam;
            } else {
                document.getElementById('urlParam').textContent = 'None found';
            }
        }

        // SQL Injection Simulation Functions
        function testSQLLogin() {
            const username = document.getElementById('sqlUser').value;
            
            let result = 'Simulated SQL Query:\n';
            result += `SELECT * FROM users WHERE username='${username}' AND password='password'\n\n`;
            
            if (username.includes("'")) {
                if (username.includes("admin'--") || username.includes("' OR '1'='1'")) {
                    result += '‚úÖ INJECTION SUCCESSFUL!\n';
                    result += 'Login bypassed - Admin access granted\n';
                    result += 'Returned data:\n';
                    result += '- admin | admin123 | admin@lph.com | administrator\n';
                    result += '- gustavo | pollos123 | gfring@lph.com | manager';
                } else {
                    result += '‚ùå SQL ERROR!\n';
                    result += 'MySQL Error: You have an error in your SQL syntax\n';
                    result += 'This reveals the database is vulnerable to injection!';
                }
            } else {
                result += '‚ùå LOGIN FAILED\n';
                result += 'Invalid username or password';
            }
            
            document.getElementById('sqlOutput').textContent = result;
        }

        function testOrderLookup() {
            const orderID = document.getElementById('orderID').value;
            
            let result = 'Simulated SQL Query:\n';
            result += `SELECT * FROM orders WHERE order_id='${orderID}'\n\n`;
            
            if (orderID.includes('UNION')) {
                result += '‚úÖ UNION INJECTION SUCCESSFUL!\n';
                result += 'Database schema exposed:\n\n';
                if (orderID.includes('information_schema')) {
                    result += 'Tables found:\n';
                    result += '- users\n- orders\n- products\n- customers\n- contact_submissions';
                } else {
                    result += 'User data extracted:\n';
                    result += 'admin:$2y$10$hash...\n';
                    result += 'gustavo:$2y$10$hash...\n';
                    result += 'walter:$2y$10$hash...';
                }
            } else if (orderID.includes("'")) {
                result += '‚ùå SQL ERROR!\n';
                result += 'MySQL Error: You have an error in your SQL syntax\n';
                result += 'Injection point detected!';
            } else {
                result += '‚úÖ ORDER FOUND\n';
                result += `Order ID: ${orderID}\n`;
                result += 'Customer: John Doe\n';
                result += 'Total: $15.79\n';
                result += 'Status: completed';
            }
            
            document.getElementById('orderLookupOutput').textContent = result;
        }

        function openYourForms() {
            // Open your actual forms for testing
            window.open('order.html', '_blank');
            window.open('cart.html', '_blank');
            window.open('checkout.html', '_blank');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkURLParam();
        });
    </script>
